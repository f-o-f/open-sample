!function(e){var o={};function n(t){if(o[t])return o[t].exports;var s=o[t]={i:t,l:!1,exports:{}};return e[t].call(s.exports,s,s.exports,n),s.l=!0,s.exports}n.m=e,n.c=o,n.d=function(e,o,t){n.o(e,o)||Object.defineProperty(e,o,{enumerable:!0,get:t})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,o){if(1&o&&(e=n(e)),8&o)return e;if(4&o&&"object"==typeof e&&e&&e.__esModule)return e;var t=Object.create(null);if(n.r(t),Object.defineProperty(t,"default",{enumerable:!0,value:e}),2&o&&"string"!=typeof e)for(var s in e)n.d(t,s,function(o){return e[o]}.bind(null,s));return t},n.n=function(e){var o=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(o,"a",o),o},n.o=function(e,o){return Object.prototype.hasOwnProperty.call(e,o)},n.p="",n(n.s=3)}([function(e,o){e.exports=require("express")},function(e,o){e.exports=require("body-parser")},function(e,o){e.exports=require("mongodb")},function(e,o,n){"use strict";n.r(o);var t=n(0),s=n(1),r=n(2),u={useNewUrlParser:!0,useUnifiedTopology:!0},i=function(e){r.MongoClient.connect("mongodb://localhost:27017",u,(function(o,n){o?e(o,null,null):e(null,n,n.db("open-sample"))}))},l=t.Router();l.post("/",(function(e,o,n){var t=e.body.goods_id,s=e.body.name,r=e.body.size,u=e.body.amount,l=e.body.note;if(console.log(s),console.log(t),void 0===t||void 0===s)return o.status(400).json({message:"Require Parameter."}),n();i((function(e,i,c){if(e)return i.close(),o.status(500).json({message:e.message}),n(e);c.collection("goods").insertOne({name:s,goods_id:t,size:r,amount:u,note:l},(function(e,t){if(e)return i.close(),o.status(500).json({message:e.message}),n(e);i.close(),o.json(t)}))}))})),l.post("/search",(function(e,o,n){i((function(e,t,s){if(e)return t.close(),o.status(500).json({message:e.message}),n(e);s.collection("goods").find((function(e,s){if(e)return t.close(),o.status(500).json({message:e.message}),n(e);t.close(),null==s?o.status(404).json({message:"Not found."}):o.status(200).json(s)}))}))}));var c=l,a=t();a.listen(3e3),a.use(s.urlencoded({extended:!0})),a.use(s.json()),a.use((function(e,o,n){o.header("Access-Control-Allow-Origin","*"),o.header("Access-Control-Allow-Headers","Origin, X-Requested-With, Content-Type, Accept"),n()})),a.use(t.static("./front")),a.use("/goods",c),a.use((function(e,o){o.status(404).json({message:"Not Found API."})}));o.default=a}]);
//# sourceMappingURL=server.js.map